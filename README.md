### **LemonReqable 开发文档**

#### **项目概述**

LemonReqable 是一个跨平台的 API 调试与测试一站式解决方案，结合了 Fiddler、Charles 和 Postman 等工具的核心功能，专为开发者提供高效的流量捕获、API 调试、重写、回放、脚本处理和测试功能。通过集成 MITM 代理技术，LemonReqable 支持 HTTP/HTTPS 流量的监控与分析，并且提供自定义代理、请求重写、历史记录等工具，以便于开发者快速调试和优化 API。

#### **技术栈**

* **前端**：React、Electron（跨平台桌面应用）
* **后端**：Go（Golang）+ WebSocket 或 REST API
* **网络通信**：Go 内置 HTTP 包、mitmproxy
* **流量分析**：支持 HTTP/1.1、HTTP2 和 HTTP3（QUIC）
* **UI 设计**：Material-UI + TailwindCSS
* **数据存储**：SQLite 或 MongoDB（用于存储历史记录、配置等）

---

### **核心功能模块**

#### 1. **API 调试功能**

LemonReqable 提供强大的 API 调试能力，支持流量捕获、请求/响应的实时断点、请求重写等多种调试功能，帮助开发者在开发和测试阶段快速定位问题。

##### 1.1 **流量捕获与协议支持**

* **协议支持**：HTTP/1.x、HTTP2、WebSocket（基于 HTTP/1.0 升级）
* **代理模式**：支持 HTTP/HTTPS、Socks4、Socks5 代理模式
* **SSL/TLS 协议**：支持 TLSv1.1、TLSv1.2 和 TLSv1.3，支持自定义证书导入和双向认证

##### 1.2 **调试功能**

* **请求重写**：支持本地映射、远程映射、重定向操作
* **断点调试**：能够在请求或响应的任意位置设置断点，暂停并查看/修改数据
* **回放**：支持单个或多个请求的回放，验证不同请求条件下的 API 响应
* **Diff 工具**：对比请求和响应的差异，快速定位问题
* **脚本支持**：可以使用 Python 脚本来修改请求和响应数据

##### 1.3 **高级调试功能**

* **反向代理与镜像**：支持本地反向代理，调试 HTTPS 流量时无需信任 CA 证书
* **代理设置**：灵活的代理配置，支持全局代理和应用级代理设置
* **历史记录**：自动保存请求和响应记录，方便开发者查看和复现历史数据
* **流量来源**：可以查看流量来自哪个应用程序，帮助快速定位问题

---

#### 2. **API 测试功能**

LemonReqable 提供完善的 API 测试功能，支持请求批量编辑、测试集合管理、性能分析等，助力开发者高效测试接口性能与稳定性。

##### 2.1 **API 测试功能**

* **多协议支持**：支持 HTTP/1.1、HTTP2 和 HTTP3（QUIC）协议
* **API 集合管理**：可以将多个 API 请求组织成集合，方便管理和分享
* **批量编辑**：支持批量修改请求参数、头信息、表单数据等
* **性能监控**：查看请求的响应时间，进行性能分析
* **Cookie 管理**：自动保存和管理 Cookies，支持跨请求的 Cookie 使用

##### 2.2 **授权与认证**

* **授权支持**：支持 API Key、Basic Auth、Bearer Token 等常见授权方式
* **环境管理**：全局环境和用户环境支持，便于多个配置场景的切换
* **cURL 导出**：支持从 API 请求导出 cURL 命令，或将 cURL 转换为 API 请求

##### 2.3 **代码生成与脚本支持**

* **脚本支持**：支持编写 Python 脚本进行请求和响应数据的处理
* **代码片段**：自动生成主流编程语言的代码片段，如 Python、Java、Node.js，方便开发者集成到项目中

---

#### 3. **界面设计与用户体验**

LemonReqable 强调简洁、高效且易于使用的界面设计，确保开发者能够高效地完成 API 调试与测试工作。

##### 3.1 **界面设计原则**

* **现代化设计**：使用 Material-UI 和 TailwindCSS 提供响应式和现代化的界面
* **交互设计**：简洁的导航，直观的操作流程，所有操作都尽量通过可视化界面完成，减少复杂度
* **布局**：

  * **主面板**：展示流量捕获、请求/响应信息，支持多选和过滤操作
  * **功能区**：集成重写规则、断点设置、API 测试等模块
  * **工具栏**：提供代理设置、环境切换、历史记录等快捷入口
  * **底部面板**：显示请求/响应性能数据、日志和调试信息

##### 3.2 **响应式设计**

* **跨平台支持**：支持 Windows、macOS 和 Linux 平台，确保一致的用户体验
* **动态反馈**：实时显示操作反馈、错误提示和加载进度等

---

### **后端技术架构**

LemonReqable 的后端基于 Go（Golang）构建，专注于高性能和并发处理，能够高效地处理 API 调试、流量捕获与回放、请求重写等任务。

#### 1. **Go 的优势**

* **高性能**：Go 编译后为本地机器代码，能够处理大量并发请求和高吞吐量数据，适合高性能的 API 调试与测试需求。
* **并发处理**：Go 的 goroutines 和 channels 可以非常高效地处理并发流量和请求，适用于网络代理和流量分析等任务。
* **简洁易用**：Go 语法简洁明了，不需要复杂的框架，方便快速开发并保证代码可维护性。
* **强大的标准库**：Go 提供了强大的网络支持库，便于快速实现 HTTP 代理、请求/响应处理、数据分析等功能。

#### 2. **Go 实现的后端功能**

* **流量捕获与代理**：使用 Go 实现一个高效的 HTTP(S) 代理服务器，支持请求/响应的修改与流量分析
* **请求重写与断点**：通过 Go 的 HTTP 处理机制，插入自定义的中间件来实现请求重写、断点设置等功能
* **性能监控与日志记录**：Go 提供内建的性能分析工具（如 pprof），可以实时监控 API 请求的响应时间、数据量等
* **脚本支持**：通过 Python 脚本处理请求和响应数据，并通过 Go 的接口与前端进行交互
* **API 测试与报告生成**：Go 后端可用于生成 API 测试报告，记录请求、响应和性能数据，供开发者分析与优化

---

### **开发计划与流程**

#### 1. **需求分析与功能规划**

* 确定核心功能模块，如流量捕获、API 测试、请求重写、历史记录等
* 设计多平台支持架构（Windows、macOS、Linux）

#### 2. **UI/UX 设计**

* 使用设计工具（如 Figma、Sketch）进行界面原型设计和用户体验测试

#### 3. **后端开发**

* 使用 Go 编写高性能的代理服务和 API 调试功能
* 集成 mitmproxy 或自定义代理库，实现流量拦截与修改

#### 4. **前端开发**

* 使用 React 和 Electron 构建跨平台桌面应用
* 集成 Material-UI 提供现代化的界面风格

#### 5. **功能实现与集成**

* 实现 API 调试、请求重写、回放、性能监控等功能
* 集成 API 测试、脚本支持、授权设置等模块

#### 6. **测试与发布**

* 完成功能测试、性能优化，并进行多平台的兼容性测试
* 根据用户反馈进行迭代更新

---

### **结语**

LemonReqable 将成为开发者进行 API 调试与测试的强大工具。利用 Go 的高效性能和 React/Electron 的跨平台支持，它为开发者提供了一个灵活、高效的调试环境，帮助快速定位问题、提高工作效率。通过持续的功能扩展和用户体验优化，LemonReqable 将继续推动 API 调试与测试的创新。

